---
title: vue3 + vite 动态路由
excerpt: 动态路由的实现以及踩坑之路
date: 2022年2月22日 21:44:39
tags: [日常记录]
categories: [javascript、Vue]
---

## 为什么要实现动态路由

我们在开发后台管理系统中，会有各种各样的人来操作，那么不同的人会有不同的页面操作权限，来展示不同的菜单、按钮，这个就需要通过动态路由来实现，说白了就是权限控制。

## 动态路由的主流实现方式 

目前对于前端路由表信息的存储分为两种，一种是前端控制，一种是后端控制。

- 前端控制
    逻辑相对简单，比较容易上手
- 后端控制
    路由表维护在数据库，相对安全

之前接手的公司旧项目路由表信息是维护在前端的，因为在这里，我主要介绍一下新项目中，路由表维护在后台的实现过程以及相关踩坑。

## 动态权限架构

- 用户
    由后台管理员创建用户账号
- 角色
    角色是作为连接用户和权限的桥梁存在的。一个用户可以拥有各种各样的角色，每个角色又可以拥有不同的权限。
- 权限
    常规来说，对于权限的粒度化控制，一般是到页面级别的权限，再精细一级的是到页面按钮级别的权限。
    所以，这里我们分为 页面权限 和 按钮权限。其中按钮权限隶属于页面权限。

## 权限需要包含的必要信息
```javascript
{
  id: '', // 权限id
  path: '', // 路由地址
  name: '', // 名称
  icon: '', // 图标
  component: '', // 组件渲染文件
  title: '', // 页面标题
  parentId: '', // 父级id
}
```
![image](https://img.fengxie.xyz/imgs/创建权限.png)

